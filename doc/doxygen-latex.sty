%%
%% Copyright (C) 2015 Jihuan Tian <jihuan_tian@hotmail.com>
%%  
%% This program is free software; you can redistribute it and/or modify
%% it under the terms of the GNU General Public License as published by
%% the Free Software Foundation; either version 2 of the License, or
%% (at your option) any later version.
%%  
%% This program is distributed in the hope that it will be useful,
%% but WITHOUT ANY WARRANTY; without even the implied warranty of
%% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%% GNU General Public License for more details.
%%  
%% You should have received a copy of the GNU General Public License
%% along with this program; if not, write to the Free Software
%% Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
%%  

\usepackage{ifthen}
% % Figures
% \ifthenelse{\(\isundefined\pdfoutput\)\OR\(\pdfoutput < 1\)}
% {\usepackage[dvips]{graphicx}}
% {\usepackage[pdftex]{graphicx}}
% For subfigure typesetting
% \usepackage{subfigure}

% Color
%% Customized colors
\definecolor{comment-green}{RGB}{0, 128, 0}

% SI units
\usepackage[amssymb]{SIunits}

% Typesetting source code
\usepackage{listings}

% % Hyperref support
% \ifthenelse{\(\isundefined\pdfoutput\)\OR\(\pdfoutput < 1\)}
% {\usepackage[dvipdfm, CJKbookmarks=true, bookmarksopen=true,
% bookmarksnumbered=true, colorlinks=true, hyperindex=true, plainpages=false,
% pdfpagelabels=true]{hyperref}}
% {\usepackage[pdftex, CJKbookmarks=true, bookmarksopen=true,
% bookmarksnumbered=true, colorlinks=true, hyperindex=true, plainpages=false,
% pdfpagelabels=true]{hyperref}}

% Four kinds of emphasis style
\newcommand{\empha}[1]{\textcolor{red}{#1}}
\newcommand{\emphb}[1]{\textcolor{green}{#1}}
\newcommand{\emphc}[1]{\textcolor{orange}{#1}}
\newcommand{\emphd}[1]{\textcolor{blue}{#1}}
\newcommand{\alert}[1]{\textcolor{red}{\textbf{#1}}}
\newcommand{\mycomment}[1]{\textcolor{comment-green}{#1}}

% Emphasis with box frame
%% Used in normal context
\newcommand{\alertbox}[1]{{%
    \setlength{\fboxrule}{.4mm}
    \color{red}\fbox{{\color{black}#1}}}}
\newcommand{\embox}[1]{{\setlength{\fboxrule}{.4mm}\fbox{#1}}}
%% Used in math context
\newcommand{\alertboxm}[1]{{%
    \setlength{\fboxrule}{.4mm}
    \color{red}\boxed{{\color{black}#1}}}}
\newcommand{\emboxm}[1]{{\setlength{\fboxrule}{.4mm}\boxed{#1}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Self-defined miscellaneous commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% et al
\newcommand{\etal}{{\it et al}}

% Framed box
\usepackage[framemethod=tikz]{mdframed}

% Miscellaneous math packages
\usepackage{amsmath, amssymb, amstext, amsfonts, amscd, amsxtra}
\usepackage{mathrsfs}
% Specify math font
%% Use concmath font
% \usepackage{concmath}
% For typesetting matrices with dashed separation lines
\usepackage{pmat}
%% Enlarge the default number of allowed columns in matrix environment
\setcounter{MaxMatrixCols}{20}

% For tikz drawing
\usepackage{tikz}
%% For drawing tikz commutative diagram
\usepackage{tikz-cd}
\usetikzlibrary{matrix, arrows, decorations.pathmorphing}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Self-defined math definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Math symbol commands
\newcommand{\intd}{\,{\rm d}}   % Symbol 'd' used in integration, such as 'dx'
\newcommand{\diff}{{\rm d}}     % Symbol 'd' used in differentiation
\newcommand{\Diff}{{\rm D}}     % Symbol 'D' used in differentiation
\newcommand{\pdiff}{\partial}   % Partial derivative
%\newcommand{DD}[2]{\frac{\diff}{\diff #2}\left( #1 \right)}
%\newcommand{Dd}[2]{\frac{\diff #1}{\diff #2}}
%\newcommand{PD}[2]{\frac{\pdiff}{\pdiff #2}\left( #1 \right)}
%\newcommand{Pd}[2]{\frac{\pdiff #1}{\pdiff #2}}
\newcommand{\rme}{{\rm e}}      % Exponential e
\newcommand{\rmi}{{\rm i}}      % Imaginary unit i
\newcommand{\rmj}{{\rm j}}      % Imaginary unit j
\newcommand{\vect}[1]{\boldsymbol{#1}}       % Vector typeset in bold and italic
\newcommand{\normvect}{\vect{n}} % Normal vector: n
\newcommand{\dform}[1]{\overset{\rightharpoonup}{\boldsymbol{#1}}}       % Vector for differential form
\newcommand{\cochain}[1]{\overset{\rightharpoonup}{#1}}       % Vector for cochain
\newcommand{\abs}[1]{\big\lvert#1\big\rvert} % Absolute value (single vertical bar)
\newcommand{\norm}[1]{\big\lVert#1\big\rVert} % Norm (double vertical bar)
\newcommand{\ouset}[3]{\overset{#3}{\underset{#2}{#1}}} % over and under set
% Super/subscript for column index of a matrix, which is used in tensor analysis.
\newcommand{\cscript}[1]{\;\; #1}
\newcommand{\suchthat}{\textit{S.T.\;}} % S.T., such that
% Star symbol used as prefix in front of a paragraph with no indent
\newcommand{\prefstar}{\noindent$\ast$ }      
% Big vertical line restricting the function.
% Example: $u(x)\restrict_{\Omega_0}$
\newcommand{\restrict}{\big\vert}

% Math operators which are typeset in Roman font
\DeclareMathOperator{\sgn}{sgn} % Sign function
\DeclareMathOperator{\erf}{erf} % Error function
\DeclareMathOperator{\Bd}{Bd}   % Boundary of a set or domain, used in topology
\DeclareMathOperator{\Int}{Int} % Interior of a set or domain, used in topology
\DeclareMathOperator{\rank}{rank} % Rank of a matrix
\DeclareMathOperator{\divergence}{div} % Divergence
\DeclareMathOperator{\curl}{curl} % Curl
\DeclareMathOperator{\grad}{grad} % Gradient
\DeclareMathOperator{\tr}{tr} % Trace

% Mathematical environment
\usepackage[standard, amsmath, hyperref, thmmarks, thref]{ntheorem}

% %%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Pseudocode typesetting
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Use "algorithm" environment for floating an algorithm.
\usepackage{algorithm}
% Use algorithmicx package
\usepackage{algpseudocode}